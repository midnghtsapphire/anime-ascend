import { useAuth } from '@/contexts/AuthContext';\nimport { Button } from '@/components/ui/button';\nimport { Card } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { BarChart, Users, CreditCard, Zap, AlertCircle, TrendingUp } from 'lucide-react';\nimport { useLocation } from 'wouter';\n\n/**\n * Anime Ascend Admin Dashboard\n * Design: Neon Shrine glassmorphism\n * \n * Features:\n * - User statistics and management\n * - Revenue tracking\n * - Subscription analytics\n * - Token usage analytics\n * - Payment logs and refund interface\n * - Content moderation tools\n */\n\nexport default function AdminDashboard() {\n  const { user } = useAuth();\n  const [, setLocation] = useLocation();\n\n  // Redirect if not admin\n  if (!user?.isAdmin) {\n    setLocation('/');\n    return null;\n  }\n\n  // Mock data\n  const stats = {\n    totalUsers: 1234,\n    activeSubscriptions: 456,\n    monthlyRevenue: 4560.00,\n    totalTokensIssued: 234567,\n    failedPayments: 12,\n  };\n\n  const recentUsers = [\n    { id: 1, email: 'user1@example.com', tier: 'premium', joinedDate: '2026-02-20' },\n    { id: 2, email: 'user2@example.com', tier: 'free', joinedDate: '2026-02-19' },\n    { id: 3, email: 'user3@example.com', tier: 'pro', joinedDate: '2026-02-18' },\n  ];\n\n  const failedPayments = [\n    { id: 1, email: 'user@example.com', amount: 9.99, reason: 'Card declined', date: '2026-02-20' },\n    { id: 2, email: 'user2@example.com', amount: 19.99, reason: 'Insufficient funds', date: '2026-02-19' },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background text-foreground\">\n      {/* Navigation */}\n      <nav className=\"sticky top-0 z-50 glass-panel-sm backdrop-blur-xl border-b border-primary/20\">\n        <div className=\"container flex items-center justify-between h-16\">\n          <div className=\"text-2xl font-bold text-primary\">Admin Dashboard</div>\n          <Button variant=\"ghost\" className=\"text-foreground/70 hover:text-foreground\">\n            Logout\n          </Button>\n        </div>\n      </nav>\n\n      {/* Stats Grid */}\n      <section className=\"container py-8\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\n          {/* Total Users */}\n          <Card className=\"glass-panel p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-foreground/70 text-sm font-semibold\">Total Users</h3>\n              <Users className=\"w-5 h-5 text-primary\" />\n            </div>\n            <p className=\"text-3xl font-bold\">{stats.totalUsers.toLocaleString()}</p>\n            <p className=\"text-xs text-foreground/50 mt-2\">+12% this month</p>\n          </Card>\n\n          {/* Active Subscriptions */}\n          <Card className=\"glass-panel p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-foreground/70 text-sm font-semibold\">Active Subs</h3>\n              <CreditCard className=\"w-5 h-5 text-accent\" />\n            </div>\n            <p className=\"text-3xl font-bold\">{stats.activeSubscriptions}</p>\n            <p className=\"text-xs text-foreground/50 mt-2\">37% conversion</p>\n          </Card>\n\n          {/* Monthly Revenue */}\n          <Card className=\"glass-panel p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-foreground/70 text-sm font-semibold\">Revenue</h3>\n              <TrendingUp className=\"w-5 h-5 text-secondary\" />\n            </div>\n            <p className=\"text-3xl font-bold\">${stats.monthlyRevenue.toLocaleString()}</p>\n            <p className=\"text-xs text-foreground/50 mt-2\">This month</p>\n          </Card>\n\n          {/* Tokens Issued */}\n          <Card className=\"glass-panel p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-foreground/70 text-sm font-semibold\">Tokens Issued</h3>\n              <Zap className=\"w-5 h-5 text-accent\" />\n            </div>\n            <p className=\"text-3xl font-bold\">{(stats.totalTokensIssued / 1000).toFixed(0)}K</p>\n            <p className=\"text-xs text-foreground/50 mt-2\">All time</p>\n          </Card>\n\n          {/* Failed Payments */}\n          <Card className=\"glass-panel p-6 border-red-500/30\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-foreground/70 text-sm font-semibold\">Failed Payments</h3>\n              <AlertCircle className=\"w-5 h-5 text-red-500\" />\n            </div>\n            <p className=\"text-3xl font-bold text-red-400\">{stats.failedPayments}</p>\n            <p className=\"text-xs text-foreground/50 mt-2\">Needs attention</p>\n          </Card>\n        </div>\n      </section>\n\n      {/* Tabs */}\n      <section className=\"container pb-24\">\n        <Tabs defaultValue=\"users\" className=\"w-full\">\n          <TabsList className=\"glass-panel-sm mb-8\">\n            <TabsTrigger value=\"users\">Users</TabsTrigger>\n            <TabsTrigger value=\"payments\">Payments</TabsTrigger>\n            <TabsTrigger value=\"subscriptions\">Subscriptions</TabsTrigger>\n            <TabsTrigger value=\"analytics\">Analytics</TabsTrigger>\n          </TabsList>\n\n          {/* Users Tab */}\n          <TabsContent value=\"users\">\n            <Card className=\"glass-panel p-6\">\n              <h3 className=\"text-lg font-semibold mb-6\">Recent Users</h3>\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full text-sm\">\n                  <thead>\n                    <tr className=\"border-b border-primary/20\">\n                      <th className=\"text-left py-3 px-4 font-semibold text-foreground/70\">Email</th>\n                      <th className=\"text-left py-3 px-4 font-semibold text-foreground/70\">Tier</th>\n                      <th className=\"text-left py-3 px-4 font-semibold text-foreground/70\">Joined</th>\n                      <th className=\"text-left py-3 px-4 font-semibold text-foreground/70\">Actions</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {recentUsers.map((user) => (\n                      <tr key={user.id} className=\"border-b border-primary/10 hover:bg-primary/5\">\n                        <td className=\"py-3 px-4\">{user.email}</td>\n                        <td className=\"py-3 px-4\">\n                          <span className=\"px-2 py-1 rounded-full text-xs font-semibold bg-primary/20 text-primary\">\n                            {user.tier}\n                          </span>\n                        </td>\n                        <td className=\"py-3 px-4 text-foreground/70\">{user.joinedDate}</td>\n                        <td className=\"py-3 px-4\">\n                          <Button size=\"sm\" variant=\"ghost\" className=\"text-primary hover:bg-primary/10\">\n                            View\n                          </Button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </Card>\n          </TabsContent>\n\n          {/* Payments Tab */}\n          <TabsContent value=\"payments\">\n            <Card className=\"glass-panel p-6\">\n              <h3 className=\"text-lg font-semibold mb-6\">Failed Payments</h3>\n              <div className=\"space-y-4\">\n                {failedPayments.map((payment) => (\n                  <div key={payment.id} className=\"flex items-center justify-between p-4 bg-red-500/10 border border-red-500/30 rounded-lg\">\n                    <div>\n                      <p className=\"font-semibold\">{payment.email}</p>\n                      <p className=\"text-sm text-foreground/70\">${payment.amount} - {payment.reason}</p>\n                      <p className=\"text-xs text-foreground/50 mt-1\">{payment.date}</p>\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <Button size=\"sm\" variant=\"outline\" className=\"border-red-500/50 text-red-400 hover:bg-red-500/10\">\n                        Retry\n                      </Button>\n                      <Button size=\"sm\" variant=\"outline\" className=\"border-red-500/50 text-red-400 hover:bg-red-500/10\">\n                        Refund\n                      </Button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </Card>\n          </TabsContent>\n\n          {/* Subscriptions Tab */}\n          <TabsContent value=\"subscriptions\">\n            <Card className=\"glass-panel p-6\">\n              <h3 className=\"text-lg font-semibold mb-6\">Subscription Analytics</h3>\n              <div className=\"grid grid-cols-3 gap-4\">\n                <div className=\"p-4 bg-primary/10 rounded-lg border border-primary/20\">\n                  <p className=\"text-foreground/70 text-sm mb-2\">Free Tier</p>\n                  <p className=\"text-2xl font-bold\">778</p>\n                  <p className=\"text-xs text-foreground/50 mt-2\">63% of users</p>\n                </div>\n                <div className=\"p-4 bg-accent/10 rounded-lg border border-accent/20\">\n                  <p className=\"text-foreground/70 text-sm mb-2\">Premium</p>\n                  <p className=\"text-2xl font-bold\">380</p>\n                  <p className=\"text-xs text-foreground/50 mt-2\">31% of users</p>\n                </div>\n                <div className=\"p-4 bg-secondary/10 rounded-lg border border-secondary/20\">\n                  <p className=\"text-foreground/70 text-sm mb-2\">Pro</p>\n                  <p className=\"text-2xl font-bold\">76</p>\n                  <p className=\"text-xs text-foreground/50 mt-2\">6% of users</p>\n                </div>\n              </div>\n            </Card>\n          </TabsContent>\n\n          {/* Analytics Tab */}\n          <TabsContent value=\"analytics\">\n            <Card className=\"glass-panel p-6\">\n              <h3 className=\"text-lg font-semibold mb-6\">Analytics Coming Soon</h3>\n              <p className=\"text-foreground/70\">Detailed analytics dashboard with charts and insights will be available soon.</p>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </section>\n    </div>\n  );\n}\n
